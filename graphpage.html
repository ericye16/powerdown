<div class="row">
  <div class="col-md-12">
    <canvas id="myChart" width="400" height="400"></canvas>
    <script>
    function set_data(given_data){
     /*
     for(i=0;i<10;i++){
       myLineChart.removeData();
     }*/
     console.log(data["labels"])
     data["labels"]=new Array();
     myLineChart.clear()
     var new_labels=new Array(given_data.length);
      for(i=0;i<given_data.length;i++){
        new_labels[i]=parseInt((new Date().getHours())/3)+(i+1)*3;
      }
      console.log(given_data);
      console.log(new_labels);
      
      for(i=0;i<given_data.length;i++){
        myLineChart.addData(given_data[i],new_labels[i]);
        myLineChart.stop();
      }
    }
    
    function handle_storage(e) {
      if (!e) { e = window.event; }
        if(e.key="daily cost"){
          array=e.newValue.split(",")
          //console.log(toString.call(array));
          set_data(array);
          
        }
        
    }
    
    if (window.addEventListener) {
      window.addEventListener("storage", handle_storage, false);
    } else {
      window.attachEvent("onstorage", handle_storage);
    };
    
      var data = {
    labels: [3,6,9,12],
    datasets: [
        {
            label: "",
            fillColor: "rgba(151,187,205,0.2)",
            strokeColor: "rgba(151,187,205,1)",
            pointColor: "rgba(151,187,205,1)",
            pointStrokeColor: "#fff",
            pointHighlightFill: "#fff",
            pointHighlightStroke: "rgba(151,187,205,1)",
            data: [1,1,1,1]
        }
    ]
};
    
    var ctx = document.getElementById("myChart").getContext("2d");
    var myLineChart = new Chart(ctx).Line(data);
    localStorage["daily cost"]=[1,2,3]
    
    </script>
  </div>
</div>
